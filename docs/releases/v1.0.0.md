# WhisperGo v1.0.0

Native macOS voice input inspired by Wispr Flow: press a hotkey, dictate, and WhisperGo inserts the text into the active app.

- **Download:** `WhisperGo-1.0.0.dmg` (asset below)
- **Build target:** Apple Silicon (`arm64`)

## Important: First launch on macOS (Gatekeeper)

This release is **not notarized** (ad-hoc signed). On first launch, macOS may block it with a dialog like:
“Apple could not check if ‘WhisperGo’ is free of malware…”.

To open it anyway (works on recent macOS versions), use Terminal:

```bash
sudo xattr -dr com.apple.quarantine /Applications/WhisperGo.app
open /Applications/WhisperGo.app
```

> Deutsch: Setup + Troubleshooting in `README.de.md`.

## Highlights

### System-wide dictation workflow
- **Global hotkeys:** Toggle + Hold-to-record (Push-to-talk)
- **Voice activity detection:** fast start/stop based on speech
- **Instant feedback:** menu bar state + animated overlay
- **Auto-paste:** copies to clipboard + sends Cmd+V into the frontmost app

### Multiple transcription providers
- **Deepgram (WebSocket streaming):** transcribes *during recording* for minimal latency
- **Groq (REST):** very fast Whisper inference
- **OpenAI (REST):** highest quality (GPT-4o Transcribe)
- **Local (offline):** no API costs, three backends:
  - **`whisper`**: `openai-whisper` (PyTorch), uses **MPS** on Apple Silicon
  - **`faster`**: `faster-whisper` (CTranslate2), CPU-optimized (macOS = CPU-only)
  - **`mlx`**: `mlx-whisper` (MLX/Metal), Apple Silicon GPU acceleration

### Optional LLM post-processing (“Refine”)
- Removes filler words, fixes grammar, formats into clean paragraphs
- Context-aware style (email/chat/code/default) based on the active app
- Spoken punctuation/formatting commands (interpreted by the LLM)
- Providers: Groq / OpenAI / OpenRouter

### Advanced local performance tuning + presets
- Settings UI exposes local knobs (device, warmup, fast decoding, decode overrides, compute types, threading, etc.)
- Built-in presets for common macOS setups (including MLX presets)

### Custom vocabulary
- Add domain terms in `~/.whisper_go/vocabulary.json` to improve recognition (local + Deepgram)

## App components (what’s included)

### Core orchestration
- `whisper_daemon.py`: unified daemon that ties everything together
  - hotkey handling (toggle + hold)
  - microphone capture + Deepgram streaming
  - provider calls (API or local)
  - UI updates (menu bar + overlay)
  - optional refine step
  - clipboard + auto-paste
  - background preload/warmup for local models

### CLI & Raycast compatibility
- `transcribe.py`: CLI entry point
  - transcribe audio files
  - record from microphone
  - daemon/Raycast mode (SIGUSR1-driven stop)

### Transcription providers
- `providers/`:
  - `deepgram_stream.py`: WebSocket streaming implementation
  - `deepgram.py`: Deepgram REST fallback
  - `openai.py`: OpenAI transcription API
  - `groq.py`: Groq Whisper API
  - `local.py`: offline Whisper with backends (`whisper` / `faster` / `mlx`)

### Native UI
- `ui/`:
  - `menubar.py`: menu bar status + “Settings…” + “Open Logs”
  - `overlay.py`: always-on-top overlay with animated waveform + state colors
  - `welcome.py`: Settings/Welcome window (incl. Advanced tab and presets)

### Refine pipeline
- `refine/`:
  - `context.py`: active-app context detection
  - `llm.py`: refine orchestration + providers
  - `prompts.py`: refine prompts (voice commands, formatting, etc.)

### Utilities & platform layer
- `utils/`: permissions checks, logging, hotkey parsing, preferences, vocabulary management
- `whisper_platform/`: macOS-focused platform abstraction (clipboard, sound, app detection)

## Configuration & data locations

WhisperGo stores user data in `~/.whisper_go/`:

- `~/.whisper_go/.env`: persistent settings (used by the app + daemon + Settings UI)
- `~/.whisper_go/logs/whisper_go.log`: main log file
- `~/.whisper_go/startup.log`: emergency startup log (early crashes)
- `~/.whisper_go/vocabulary.json`: custom vocabulary terms

## Install & first run

1. Download `WhisperGo-1.0.0.dmg` from the assets below.
2. Drag **WhisperGo.app** to **/Applications**.
3. Start the app.
4. Grant permissions when prompted:
   - **Microphone** (required)
   - **Input Monitoring** (required for Hold-to-record and some hotkeys)
   - **Accessibility** (recommended for reliable auto-paste)
5. Open menu bar → **Settings…** and configure:
   - provider API keys (Deepgram/OpenAI/Groq/OpenRouter)
   - mode (`deepgram` / `groq` / `openai` / `local`)
   - local backend/model + optional Advanced tuning

## Notes & known limitations

- **Ad-hoc signed DMG:** this build is signed ad-hoc (not notarized). For frictionless distribution you’ll want Developer ID signing + notarization.
- **MLX limitations:** `mlx-whisper` currently does **not** implement beam search; `WHISPER_GO_LOCAL_BEAM_SIZE` is ignored on `mlx`.
- **MLX dependencies:** the DMG bundles MLX dependencies. If you see `No module named 'scipy'` or `No module named 'unittest'`, re-download the DMG (older builds missed these).
- **First-run downloads:** local backends may download models on first use (network required).
- **faster-whisper on macOS:** runs **CPU-only** (no Metal/MPS).
- **ffmpeg:** required for some local *file transcription* paths; live dictation (mic) does not need ffmpeg.

## Links

- Docs / Usage: `README.md`
- Deutsch: `README.de.md`
